"use strict";var app=angular.module("smogApp",["ngMessages","ngMaterial","ngRoute","nvd3"]).config(["$routeProvider","$locationProvider","$sceProvider",function(a,e,o){e.html5Mode({enabled:!0,requireBase:!1}),a.when("/",{templateUrl:"/views/main.html",controller:"main"}).when("/main",{templateUrl:"/views/main.html",controller:"main"}).otherwise({redirectTo:"/"}),o.enabled(!1)}]);angular.module("smogApp").controller("main",["$scope","chart","mainModel","googleMap",function(a,e,o,t){a.chart=e,a.mainModel=o,a.googleMap=t}]),angular.module("smogApp").factory("chart",["$http","$timeout","$window",function(a,e,o){var t={};if(o.innerWidth<570)var n=-90,i=80;else n=-45,i=70;return t.create=function(a){t.options={chart:{type:"discreteBarChart",height:450,margin:{top:70,right:60,bottom:i,left:60},x:function(a){return a.date},y:function(a){return a.value},xAxis:{rotateLabels:n},yAxis:{axisLabelDistance:-10}}},e(function(){t.dataset=a.sensors},0)},t.getTitle=function(a){switch(a){case"PM10":return'<p class="paragraph--chart-title">PM10 [µg/m<sup>3</sup>] </p>';case"PM2.5":return'<p class="paragraph--chart-title">PM2,5 [µg/m<sup>3</sup>] </p>';case"SO2":return'<p class="paragraph--chart-title">SO<sub>2</sub> [µg/m<sup>3</sup>] </p>';case"NO2":return'<p class="paragraph--chart-title">NO<sub>2</sub> [µg/m<sup>3</sup>] </p>';case"CO":return'<p class="paragraph--chart-title">PM10 [µg/m<sup>3</sup>] </p>';case"O3":return'<p class="paragraph--chart-title">O<sub>3</sub> [µg/m<sup>3</sup>] </p>';case"C6H6":return'<p class="paragraph--chart-title">C<sub>6</sub>H<sub>6</sub>[µg/m<sup>3</sup>] </p>'}},t}]),angular.module("smogApp").factory("googleMap",["$http","chart","$timeout","$mdSidenav",function(a,u,k,e){var o,d={};d.toggleLeft=(o="left",function(){e(o).toggle()}),e("left",!0).then(function(a){a.onClose(function(){document.getElementsByClassName("md-sidenav-left")[0].scrollTop=0})});var t={zoom:7,center:new google.maps.LatLng(52.069167,19.480556),mapTypeId:google.maps.MapTypeId.roadmap,mapTypeControl:!0,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.HORIZONTAL_BAR,position:google.maps.ControlPosition.BOTTOM_LEFT}},b=new google.maps.Map(document.getElementById("map__google"),t);return d.addMarkers=function(a){for(var e=new google.maps.Size(32,32),o=(new google.maps.Size(59,32),new google.maps.Point(0,0)),t=new google.maps.Point(16,16),n=0,i=0;i<a.sensors.length;i++){n++;for(var r=a.sensors[i].key,w=0;w<24;w++){var s=a.sensors[i].values[w].value;switch(r){case"PM10":a.sensors[i].values[w].color=s<=21?"#00B050":21<s&&s<=61?"#92D050":61<s&&s<=101?"#FFC700":101<s&&s<=141?"#FFC000":141<s&&s<=201?"#FF0000":"#C00000";break;case"PM2.5":a.sensors[i].values[w].color=s<=13?"#00B050":13<s&&s<=37?"#92D050":37<s&&s<=61?"#FFC700":61<s&&s<=85?"#FFC000":85<s&&s<=121?"#FF0000":"#C00000";break;case"SO2":a.sensors[i].values[w].color=s<=51?"#00B050":51<s&&s<=101?"#92D050":101<s&&s<=201?"#FFC700":201<s&&s<=351?"#FFC000":351<s&&s<=501?"#FF0000":"#C00000";break;case"NO2":a.sensors[i].values[w].color=s<=41?"#00B050":41<s&&s<=101?"#92D050":101<s&&s<=151?"#FFC700":151<s&&s<=201?"#FFC000":201<s&&s<=401?"#FF0000":"#C00000";break;case"CO":a.sensors[i].values[w].color=s<=300?"#00B050":300<s&&s<=700?"#92D050":700<s&&s<=1100?"#FFC700":1100<s&&s<=1500?"#FFC000":1500<s&&s<=2100?"#FF0000":"#C00000";break;case"O3":a.sensors[i].values[w].color=s<=71?"#00B050":71<s&&s<=121?"#92D050":121<s&&s<=151?"#FFC700":151<s&&s<=181?"#FFC000":181<s&&s<=241?"#FF0000":"#C00000";break;case"C6H6":a.sensors[i].values[w].color=s<=6?"#00B050":6<s&&s<=11?"#92D050":11<s&&s<=16?"#FFC700":16<s&&s<=21?"#FFC000":21<s&&s<=51?"#FF0000":"#C00000"}}if(n===a.sensors.length){var z=a.sensors[a.sensors.length-1].values[0].value.toFixed(0),c="000000";switch(a.sensors[a.sensors.length-1].key){case"PM10":a.background=z<=21?(c="00B050",a.caqi=z,a.text1="Jakość powietrza jest bardzo dobra!",a.text2="Warunki bardzo sprzyjające do wszelkich aktywności na wolnym powietrzu, bez ograniczeń.","#00B050"):21<z&&z<=61?(c="92D050",a.caqi=z,a.text1="Jakość powietrza jest zadowalająca!",a.text2="Można przebywać na wolnym powietrzu i wykonywać dowolną aktywność, bez ograniczeń.","#92D050"):61<z&&z<=101?(c="FFC700",a.caqi=z,a.text1="Jakość powietrza jest akceptowalna!",a.text2="Warunki umiarkowane do aktywności na wolnym powietrzu.","#FFC700"):101<z&&z<=141?(c="FFC000",a.caqi=z,a.text1="Jakość powietrza jest dostateczna!",a.text2="Należy rozważyć ograniczenie aktywności na wolnym powietrzu.","#FFC000"):141<z&&z<=201?(c="FF0000",a.caqi=z,a.text1="Jakość powietrza jest zła!",a.text2="Osoby chore, starsze, kobiety w ciąży oraz małe dzieci powinny unikać przebywania na wolnym powietrzu.","#FF0000"):(c="C00000",a.caqi=z,a.text1="Jakość powietrza jest bardzo zła!",a.text2="Osoby chore, starsze, kobiety w ciąży oraz małe dzieci powinny bezwzględnie unikać przebywania na wolnym powietrzu.","#C00000");break;case"PM2.5":a.background=z<=13?(c="00B050",a.caqi=z,a.text1="Jakość powietrza jest bardzo dobra!",a.text2="Warunki bardzo sprzyjające do wszelkich aktywności na wolnym powietrzu, bez ograniczeń.","#00B050"):13<z&&z<=37?(c="92D050",a.caqi=z,a.text1="Jakość powietrza jest zadowalająca!",a.text2="Można przebywać na wolnym powietrzu i wykonywać dowolną aktywność, bez ograniczeń.","#92D050"):37<z&&z<=61?(c="FFC700",a.caqi=z,a.text1="Jakość powietrza jest akceptowalna!",a.text2="Warunki umiarkowane do aktywności na wolnym powietrzu.","#FFC700"):61<z&&z<=85?(c="FFC000",a.caqi=z,a.text1="Jakość powietrza jest dostateczna!",a.text2="Należy rozważyć ograniczenie aktywności na wolnym powietrzu.","#FFC000"):85<z&&z<=121?(c="FF0000",a.caqi=z,a.text1="Jakość powietrza jest zła!",a.text2="Osoby chore, starsze, kobiety w ciąży oraz małe dzieci powinny unikać przebywania na wolnym powietrzu.","#FF0000"):(c="C00000",a.caqi=z,a.text1="Jakość powietrza jest bardzo zła!",a.text2="Osoby chore, starsze, kobiety w ciąży oraz małe dzieci powinny bezwzględnie unikać przebywania na wolnym powietrzu.","#C00000");break;case"SO2":a.background=z<=51?(c="00B050",a.caqi=z,a.text1="Jakość powietrza jest bardzo dobra!",a.text2="Warunki bardzo sprzyjające do wszelkich aktywności na wolnym powietrzu, bez ograniczeń.","#00B050"):51<z&&z<=101?(c="92D050",a.caqi=z,a.text1="Jakość powietrza jest zadowalająca!",a.text2="Można przebywać na wolnym powietrzu i wykonywać dowolną aktywność, bez ograniczeń.","#92D050"):101<z&&z<=201?(c="FFC700",a.caqi=z,a.text1="Jakość powietrza jest akceptowalna!",a.text2="Warunki umiarkowane do aktywności na wolnym powietrzu.","#FFC700"):201<z&&z<=351?(c="FFC000",a.caqi=z,a.text1="Jakość powietrza jest dostateczna!",a.text2="Należy rozważyć ograniczenie aktywności na wolnym powietrzu.","#FFC000"):351<z&&z<=501?(c="FF0000",a.caqi=z,a.text1="Jakość powietrza jest zła!",a.text2="Osoby chore, starsze, kobiety w ciąży oraz małe dzieci powinny unikać przebywania na wolnym powietrzu.","#FF0000"):(c="C00000",a.caqi=z,a.text1="Jakość powietrza jest bardzo zła!",a.text2="Osoby chore, starsze, kobiety w ciąży oraz małe dzieci powinny bezwzględnie unikać przebywania na wolnym powietrzu.","#C00000");break;case"NO2":a.background=z<=41?(c="00B050",a.caqi=z,a.text1="Jakość powietrza jest bardzo dobra!",a.text2="Warunki bardzo sprzyjające do wszelkich aktywności na wolnym powietrzu, bez ograniczeń.","#00B050"):41<z&&z<=101?(c="92D050",a.caqi=z,a.text1="Jakość powietrza jest zadowalająca!",a.text2="Można przebywać na wolnym powietrzu i wykonywać dowolną aktywność, bez ograniczeń.","#92D050"):101<z&&z<=151?(c="FFC700",a.caqi=z,a.text1="Jakość powietrza jest akceptowalna!",a.text2="Warunki umiarkowane do aktywności na wolnym powietrzu.","#FFC700"):151<z&&z<=201?(c="FFC000",a.caqi=z,a.text1="Jakość powietrza jest dostateczna!",a.text2="Należy rozważyć ograniczenie aktywności na wolnym powietrzu.","#FFC000"):201<z&&z<=401?(c="FF0000",a.caqi=z,a.text1="Jakość powietrza jest zła!",a.text2="Osoby chore, starsze, kobiety w ciąży oraz małe dzieci powinny unikać przebywania na wolnym powietrzu.","#FF0000"):(c="C00000",a.caqi=z,a.text1="Jakość powietrza jest bardzo zła!",a.text2="Osoby chore, starsze, kobiety w ciąży oraz małe dzieci powinny bezwzględnie unikać przebywania na wolnym powietrzu.","#C00000");break;case"CO":a.background=z<=300?(c="00B050",a.caqi=z,a.text1="Jakość powietrza jest bardzo dobra!",a.text2="Warunki bardzo sprzyjające do wszelkich aktywności na wolnym powietrzu, bez ograniczeń.","#00B050"):300<z&&z<=700?(c="92D050",a.caqi=z,a.text1="Jakość powietrza jest zadowalająca!",a.text2="Można przebywać na wolnym powietrzu i wykonywać dowolną aktywność, bez ograniczeń.","#92D050"):700<z&&z<=1100?(c="FFC700",a.caqi=z,a.text1="Jakość powietrza jest akceptowalna!",a.text2="Warunki umiarkowane do aktywności na wolnym powietrzu.","#FFC700"):1100<z&&z<=1500?(c="FFC000",a.caqi=z,a.text1="Jakość powietrza jest dostateczna!",a.text2="Należy rozważyć ograniczenie aktywności na wolnym powietrzu.","#FFC000"):1500<z&&z<=2100?(c="FF0000",a.caqi=z,a.text1="Jakość powietrza jest zła!",a.text2="Osoby chore, starsze, kobiety w ciąży oraz małe dzieci powinny unikać przebywania na wolnym powietrzu.","#FF0000"):(c="C00000",a.caqi=z,a.text1="Jakość powietrza jest bardzo zła!",a.text2="Osoby chore, starsze, kobiety w ciąży oraz małe dzieci powinny bezwzględnie unikać przebywania na wolnym powietrzu.","#C00000");break;case"O3":a.background=z<=71?(c="00B050",a.caqi=z,a.text1="Jakość powietrza jest bardzo dobra!",a.text2="Warunki bardzo sprzyjające do wszelkich aktywności na wolnym powietrzu, bez ograniczeń.","#00B050"):71<z&&z<=121?(c="92D050",a.caqi=z,a.text1="Jakość powietrza jest zadowalająca!",a.text2="Można przebywać na wolnym powietrzu i wykonywać dowolną aktywność, bez ograniczeń.","#92D050"):121<z&&z<=151?(c="FFC700",a.caqi=z,a.text1="Jakość powietrza jest akceptowalna!",a.text2="Warunki umiarkowane do aktywności na wolnym powietrzu.","#FFC700"):151<z&&z<=181?(c="FFC000",a.caqi=z,a.text1="Jakość powietrza jest dostateczna!",a.text2="Należy rozważyć ograniczenie aktywności na wolnym powietrzu.","#FFC000"):181<z&&z<=241?(c="FF0000",a.caqi=z,a.text1="Jakość powietrza jest zła!",a.text2="Osoby chore, starsze, kobiety w ciąży oraz małe dzieci powinny unikać przebywania na wolnym powietrzu.","#FF0000"):(c="C00000",a.caqi=z,a.text1="Jakość powietrza jest bardzo zła!",a.text2="Osoby chore, starsze, kobiety w ciąży oraz małe dzieci powinny bezwzględnie unikać przebywania na wolnym powietrzu.","#C00000");break;case"C6H6":a.background=z<=6?(c="00B050",a.caqi=z,a.text1="Jakość powietrza jest bardzo dobra!",a.text2="Warunki bardzo sprzyjające do wszelkich aktywności na wolnym powietrzu, bez ograniczeń.","#00B050"):6<z&&z<=11?(c="92D050",a.caqi=z,a.text1="Jakość powietrza jest zadowalająca!",a.text2="Można przebywać na wolnym powietrzu i wykonywać dowolną aktywność, bez ograniczeń.","#92D050"):11<z&&z<=16?(c="FFC700",a.caqi=z,a.text1="Jakość powietrza jest akceptowalna!",a.text2="Warunki umiarkowane do aktywności na wolnym powietrzu.","#FFC700"):16<z&&z<=21?(c="FFC000",a.caqi=z,a.text1="Jakość powietrza jest dostateczna!",a.text2="Należy rozważyć ograniczenie aktywności na wolnym powietrzu.","#FFC000"):21<z&&z<=51?(c="FF0000",a.caqi=z,a.text1="Jakość powietrza jest zła!",a.text2="Osoby chore, starsze, kobiety w ciąży oraz małe dzieci powinny unikać przebywania na wolnym powietrzu.","#FF0000"):(c="C00000",a.caqi=z,a.text1="Jakość powietrza jest bardzo zła!",a.text2="Osoby chore, starsze, kobiety w ciąży oraz małe dzieci powinny bezwzględnie unikać przebywania na wolnym powietrzu.","#C00000")}var p=new google.maps.MarkerImage("http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld=%E2%80%A2|"+c,e,o,t),l={position:new google.maps.LatLng(a.stationGegrLat,a.stationGegrLon),map:b,title:a.stationName,icon:p},y=new google.maps.Marker(l);google.maps.event.addListener(y,"click",function(){k(function(){d.model=a,u.create(d.model)},0),d.toggleLeft()})}}},d}]),angular.module("smogApp").factory("mainModel",["$http","googleMap",function(a,t){var n={info:"Proszę czekać trwa wczytywanie danych!",get:function(){a.get("/mainModel").then(function(a){if("server not available"===a.data)n.show=!1,n.info="Pobranie danych jest teraz niemożliwe, spróbuj później.";else if(200===a.status){n.show=!0,n.info="Dane zostały wczytane!";for(var e=0,o=a.data.length;e<o;e++)t.addMarkers(a.data[e])}})},getView:function(){n.view=!0}};return n.get(),n}]);